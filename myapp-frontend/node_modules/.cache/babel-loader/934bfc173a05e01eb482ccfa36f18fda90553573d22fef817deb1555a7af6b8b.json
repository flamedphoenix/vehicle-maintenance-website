{"ast":null,"code":"import React,{useState}from\"react\";import axios from\"axios\";import{Box,TextField,Button,Typography,Paper}from\"@mui/material\";import{API_URL}from'../config';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Login(_ref){let{onLogin}=_ref;const[username,setUsername]=useState(\"\");const[password,setPassword]=useState(\"\");const[error,setError]=useState(null);const handleKeyDown=e=>{if(e.getModifierState(\"CapsLock\")){setCapsLock(true);}else{setCapsLock(false);}};const submit=async e=>{e.preventDefault();try{const response=await axios.post(`${API_URL}/users/token`,new URLSearchParams({username,password}),{headers:{\"Content-Type\":\"application/x-www-form-urlencoded\"}});localStorage.setItem(\"token\",response.data.access_token);setError(null);onLogin();}catch(err){setError(\"Invalid username or password\");}};return/*#__PURE__*/_jsxs(Paper,{elevation:3,sx:{maxWidth:400,margin:\"40px auto\",padding:4,bgcolor:\"#f9f9f9\",borderRadius:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",component:\"h1\",sx:{mb:3,textAlign:\"center\"},children:\"Login\"}),/*#__PURE__*/_jsxs(Box,{component:\"form\",onSubmit:submit,noValidate:true,children:[/*#__PURE__*/_jsx(TextField,{label:\"Username\",variant:\"outlined\",fullWidth:true,required:true,margin:\"normal\",value:username,onChange:e=>setUsername(e.target.value),autoFocus:true}),/*#__PURE__*/_jsx(TextField,{label:\"Password\",type:\"password\",variant:\"outlined\",fullWidth:true,required:true,margin:\"normal\",value:password,onChange:e=>setPassword(e.target.value),onKeyDown:handleKeyDown}),capsLock&&/*#__PURE__*/_jsx(Typography,{color:\"error\",sx:{mt:1,mb:2},children:\"Caps Lock is ON\"}),error&&/*#__PURE__*/_jsx(Typography,{color:\"error\",sx:{mt:1,mb:2},children:error}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",fullWidth:true,sx:{mt:2},children:\"Login\"})]})]});}export default Login;","map":{"version":3,"names":["React","useState","axios","Box","TextField","Button","Typography","Paper","API_URL","jsx","_jsx","jsxs","_jsxs","Login","_ref","onLogin","username","setUsername","password","setPassword","error","setError","handleKeyDown","e","getModifierState","setCapsLock","submit","preventDefault","response","post","URLSearchParams","headers","localStorage","setItem","data","access_token","err","elevation","sx","maxWidth","margin","padding","bgcolor","borderRadius","children","variant","component","mb","textAlign","onSubmit","noValidate","label","fullWidth","required","value","onChange","target","autoFocus","type","onKeyDown","capsLock","color","mt"],"sources":["/home/flamedphoenix/app/myapp-frontend/src/components/Login.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport axios from \"axios\";\nimport { Box, TextField, Button, Typography, Paper } from \"@mui/material\";\nimport { API_URL } from '../config';\n\nfunction Login({ onLogin }) {\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(null);\n\n  const handleKeyDown = (e) => {\n    if (e.getModifierState(\"CapsLock\")) {\n      setCapsLock(true);\n    } else {\n      setCapsLock(false);\n    }\n  };\n\n  const submit = async (e) => {\n    e.preventDefault();\n    try {\n      const response = await axios.post(`${API_URL}/users/token`, new URLSearchParams({\n        username,\n        password,\n      }), {\n        headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" }\n      });\n      localStorage.setItem(\"token\", response.data.access_token);\n      setError(null);\n      onLogin();\n    } catch (err) {\n      setError(\"Invalid username or password\");\n    }\n  };\n\n  return (\n    <Paper\n      elevation={3}\n      sx={{\n        maxWidth: 400,\n        margin: \"40px auto\",\n        padding: 4,\n        bgcolor: \"#f9f9f9\",\n        borderRadius: 2,\n      }}\n    >\n      <Typography variant=\"h5\" component=\"h1\" sx={{ mb: 3, textAlign: \"center\" }}>\n        Login\n      </Typography>\n      <Box component=\"form\" onSubmit={submit} noValidate>\n        <TextField\n          label=\"Username\"\n          variant=\"outlined\"\n          fullWidth\n          required\n          margin=\"normal\"\n          value={username}\n          onChange={(e) => setUsername(e.target.value)}\n          autoFocus\n        />\n        <TextField\n          label=\"Password\"\n          type=\"password\"\n          variant=\"outlined\"\n          fullWidth\n          required\n          margin=\"normal\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n          onKeyDown={handleKeyDown}\n        />\n        {capsLock && (\n          <Typography color=\"error\" sx={{ mt: 1, mb: 2 }}>\n            Caps Lock is ON\n          </Typography>\n        )}\n        {error && (\n          <Typography color=\"error\" sx={{ mt: 1, mb: 2 }}>\n            {error}\n          </Typography>\n        )}\n        <Button\n          type=\"submit\"\n          variant=\"contained\"\n          color=\"primary\"\n          fullWidth\n          sx={{ mt: 2 }}\n        >\n          Login\n        </Button>\n      </Box>\n    </Paper>\n  );\n}\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}