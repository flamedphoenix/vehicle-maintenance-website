{"ast":null,"code":"import React,{useState}from\"react\";import{Box,Button,TextField,Typography,Modal}from\"@mui/material\";import axios from\"axios\";import{API_URL}from\"../config\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export function ChangePassword(_ref){let{username}=_ref;const[open,setOpen]=useState(false);const[oldPassword,setOldPassword]=useState(\"\");const[newPassword,setNewPassword]=useState(\"\");const[error,setError]=useState(null);const[success,setSuccess]=useState(null);const handleOpen=()=>setOpen(true);const handleClose=()=>{setOpen(false);setOldPassword(\"\");setNewPassword(\"\");setError(null);setSuccess(null);};const handleSubmit=async e=>{e.preventDefault();setError(null);setSuccess(null);try{await axios.post(`${API_URL}/users/change-password`,{username,old_password:oldPassword,new_password:newPassword});setSuccess(\"Password changed successfully!\");setOldPassword(\"\");setNewPassword(\"\");}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.detail)||\"Failed to change password\");}};return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"secondary\",onClick:handleOpen,children:\"Change Password\"}),/*#__PURE__*/_jsx(Modal,{open:open,onClose:handleClose,\"aria-labelledby\":\"change-password-title\",\"aria-describedby\":\"change-password-description\",children:/*#__PURE__*/_jsxs(Box,{component:\"form\",onSubmit:handleSubmit,sx:{position:\"absolute\",top:\"50%\",left:\"50%\",transform:\"translate(-50%, -50%)\",width:400,bgcolor:\"background.paper\",p:4,borderRadius:2,boxShadow:24,display:\"flex\",flexDirection:\"column\"},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",sx:{mb:2},children:\"Change Password\"}),/*#__PURE__*/_jsx(TextField,{label:\"Old Password\",type:\"password\",required:true,margin:\"normal\",value:oldPassword,onChange:e=>setOldPassword(e.target.value)}),/*#__PURE__*/_jsx(TextField,{label:\"New Password\",type:\"password\",required:true,margin:\"normal\",value:newPassword,onChange:e=>setNewPassword(e.target.value)}),error&&/*#__PURE__*/_jsx(Typography,{color:\"error\",sx:{mt:1},children:error}),success&&/*#__PURE__*/_jsx(Typography,{color:\"success.main\",sx:{mt:1},children:success}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",sx:{mt:2},children:\"Save\"}),/*#__PURE__*/_jsx(Button,{onClick:handleClose,sx:{mt:1},children:\"Cancel\"})]})})]});}export default ChangePassword;","map":{"version":3,"names":["React","useState","Box","Button","TextField","Typography","Modal","axios","API_URL","jsx","_jsx","jsxs","_jsxs","ChangePassword","_ref","username","open","setOpen","oldPassword","setOldPassword","newPassword","setNewPassword","error","setError","success","setSuccess","handleOpen","handleClose","handleSubmit","e","preventDefault","post","old_password","new_password","err","_err$response","_err$response$data","response","data","detail","children","variant","color","onClick","onClose","component","onSubmit","sx","position","top","left","transform","width","bgcolor","p","borderRadius","boxShadow","display","flexDirection","mb","label","type","required","margin","value","onChange","target","mt"],"sources":["/home/flamedphoenix/app/myapp-frontend/src/components/ChangePassword.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { Box, Button, TextField, Typography, Modal } from \"@mui/material\";\nimport axios from \"axios\";\nimport { API_URL } from \"../config\";\n\nexport function ChangePassword({ username }) {\n  const [open, setOpen] = useState(false);\n  const [oldPassword, setOldPassword] = useState(\"\");\n  const [newPassword, setNewPassword] = useState(\"\");\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(null);\n\n  const handleOpen = () => setOpen(true);\n  const handleClose = () => {\n    setOpen(false);\n    setOldPassword(\"\");\n    setNewPassword(\"\");\n    setError(null);\n    setSuccess(null);\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError(null);\n    setSuccess(null);\n\n    try {\n      await axios.post(`${API_URL}/users/change-password`, {\n        username,\n        old_password: oldPassword,\n        new_password: newPassword,\n      });\n      setSuccess(\"Password changed successfully!\");\n      setOldPassword(\"\");\n      setNewPassword(\"\");\n    } catch (err) {\n      setError(err.response?.data?.detail || \"Failed to change password\");\n    }\n  };\n\n  return (\n    <Box>\n      <Button variant=\"contained\" color=\"secondary\" onClick={handleOpen}>\n        Change Password\n      </Button>\n\n      <Modal \n        open={open} \n        onClose={handleClose}\n        aria-labelledby=\"change-password-title\"\n        aria-describedby=\"change-password-description\"\n        >\n        <Box\n          component=\"form\"\n          onSubmit={handleSubmit}\n          sx={{\n            position: \"absolute\",\n            top: \"50%\",\n            left: \"50%\",\n            transform: \"translate(-50%, -50%)\",\n            width: 400,\n            bgcolor: \"background.paper\",\n            p: 4,\n            borderRadius: 2,\n            boxShadow: 24,\n            display: \"flex\",\n            flexDirection: \"column\",\n          }}\n        >\n          <Typography variant=\"h6\" sx={{ mb: 2 }}>\n            Change Password\n          </Typography>\n\n          <TextField\n            label=\"Old Password\"\n            type=\"password\"\n            required\n            margin=\"normal\"\n            value={oldPassword}\n            onChange={(e) => setOldPassword(e.target.value)}\n          />\n\n          <TextField\n            label=\"New Password\"\n            type=\"password\"\n            required\n            margin=\"normal\"\n            value={newPassword}\n            onChange={(e) => setNewPassword(e.target.value)}\n          />\n\n          {error && (\n            <Typography color=\"error\" sx={{ mt: 1 }}>\n              {error}\n            </Typography>\n          )}\n          {success && (\n            <Typography color=\"success.main\" sx={{ mt: 1 }}>\n              {success}\n            </Typography>\n          )}\n\n          <Button type=\"submit\" variant=\"contained\" color=\"primary\" sx={{ mt: 2 }}>\n            Save\n          </Button>\n          <Button onClick={handleClose} sx={{ mt: 1 }}>\n            Cancel\n          </Button>\n        </Box>\n      </Modal>\n    </Box>\n  );\n}\n\nexport default ChangePassword;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}